(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["home"],{"6ded":function(e,t,a){e.exports={container:"Home_container_31xJP",home:"Home_home_16VbE",notif:"Home_notif_2JaVC",keys:"Home_keys_3g8yn",key:"Home_key_w3LkO",code:"Home_code_19HD-",auth:"Home_auth_3TG_i",authCode:"Home_authCode_10X4c"}},bb51:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{class:e.$style.container},[a("div",{class:e.$style.home},[a("h1",[e._v("Service Worker Push Notifications Demo")]),a("p",{directives:[{name:"show",rawName:"v-show",value:!e.isGranted,expression:"!isGranted"}],class:e.$style.notif},[e._v(" Please allow show notifications. ")]),a("div",{directives:[{name:"show",rawName:"v-show",value:e.showKeys,expression:"showKeys"}],class:e.$style.keys},[a("div",{class:e.$style.key},[e._m(0),a("p",{class:e.$style.code},[e._v(" "+e._s(e.vapidPublicKey)+" ")])]),a("div",{class:e.$style.key},[e._m(1),a("p",{class:e.$style.code},[e._v(" "+e._s(e.vapidPrivateKey)+" ")])])]),a("div",{directives:[{name:"show",rawName:"v-show",value:e.subJSON,expression:"subJSON"}],class:e.$style.auth},[a("p",{class:e.$style.authTitle},[a("strong",[e._v(" PushSubscriptionJSON Info")])]),a("p",{class:e.$style.authCode},[e._v(" "+e._s(e.subJSON)+" ")])])])])},s=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("p",[a("strong",[e._v("Public Key")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("p",[a("strong",[e._v("Private Key")])])}],i=a("d4ec"),r=a("bee2"),c=a("262e"),o=a("2caf"),u=(a("bf19"),a("9ab4")),l=a("1b40");a("38cf"),a("ac1f"),a("5319"),a("d3b7"),a("5cc6"),a("9a8c"),a("a975"),a("735e"),a("c1ac"),a("d139"),a("3a7b"),a("d5d6"),a("82f8"),a("e91f"),a("60bd"),a("5f96"),a("3280"),a("3fcc"),a("ca91"),a("25a1"),a("cd26"),a("3c5d"),a("2954"),a("649e"),a("219c"),a("170b"),a("b39a"),a("72f7"),a("a630"),a("3ca3"),a("ddb0");function v(e){for(var t="=".repeat((4-e.length%4)%4),a=(e+t).replace(/-/g,"+").replace(/_/g,"/"),n=window.atob(a),s=new Uint8Array(n.length),i=0;i<n.length;++i)s[i]=n.charCodeAt(i);return s}function y(e,t,a){t=t||0,a=a||e.byteLength;var n=window.btoa(String.fromCharCode.apply(null,Array.from(e.subarray(t,a))));return n.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function d(e,t){var a=[];return a.push(crypto.subtle.exportKey("jwk",e).then((function(e){var t=v(e.x),a=v(e.y),n=new Uint8Array(65);return n.set([4],0),n.set(t,1),n.set(a,33),n}))),a.push(crypto.subtle.exportKey("jwk",t).then((function(e){return v(e.d)}))),Promise.all(a).then((function(e){return{publicKey:y(e[0]),privateKey:y(e[1])}}))}function h(){return crypto.subtle.generateKey({name:"ECDH",namedCurve:"P-256"},!0,["deriveBits"]).then((function(e){return d(e.publicKey,e.privateKey)}))}var f=function(e){Object(c["a"])(a,e);var t=Object(o["a"])(a);function a(){var e;return Object(i["a"])(this,a),e=t.apply(this,arguments),e.status="",e.vapidPublicKey=localStorage.getItem("vapidPublicKey")||"",e.vapidPrivateKey=localStorage.getItem("vapidPrivateKey")||"",e.subJSON=null,e}return Object(r["a"])(a,[{key:"onPermissionChanged",value:function(){this.isGranted&&this.newKeys()}},{key:"isGranted",get:function(){return"granted"===this.status}},{key:"showKeys",get:function(){return this.vapidPublicKey.length>0}},{key:"created",value:function(){var e=this;Notification.requestPermission((function(t){e.status=t}))}},{key:"newKeys",value:function(){var e=this;this.showKeys?this.subscribeNotif():h().then((function(t){var a=t.publicKey,n=t.privateKey;localStorage.setItem("vapidPublicKey",a),localStorage.setItem("vapidPrivateKey",n),e.vapidPublicKey=a,e.vapidPrivateKey=n})).then((function(){e.subscribeNotif()}))}},{key:"subscribeNotif",value:function(){var e=this;navigator.serviceWorker.ready.then((function(t){return t.pushManager.getSubscription().then((function(a){return null===a?t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:e.vapidPublicKey}):a}))})).then((function(t){e.subJSON=t.toJSON()}))}}]),a}(l["b"]);Object(u["a"])([Object(l["c"])("isGranted",{immediate:!0})],f.prototype,"onPermissionChanged",null),f=Object(u["a"])([l["a"]],f);var p=f,b=p,m=a("fc7c"),_=a("2877");function w(e){this["$style"]=m["default"].locals||m["default"]}var g=Object(_["a"])(b,n,s,!1,w,null,null);t["default"]=g.exports},fc7c:function(e,t,a){"use strict";var n=a("6ded"),s=a.n(n);a.d(t,"default",(function(){return s.a}))}}]);